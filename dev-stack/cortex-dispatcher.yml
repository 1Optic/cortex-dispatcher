storage:
  directory: /cortex/storage

command_queue:
  address: "127.0.0.1:5672"

directory_sources:
  - name: mixed-directory
    directory: /cortex/incoming

directory_targets:
  - name: v5
    directory: /cortex/storage/v5
  - name: v6
    directory: /cortex/storage/v6
  - name: red
    directory: /cortex/storage/red-consumer
    notify:
      rabbitmq:
        message_template: '{"type": "new_file", "file_path": "{{ file_path }}"}'
        address: "127.0.0.1:5672"
        exchange: "amq.direct"
        routing_key: "processing-node"

sftp_sources:
  - name: local-red
    address: 127.0.0.1:22
    username: cortex
    thread_count: 4
  - name: local-blue
    address: 127.0.0.1:22
    username: cortex
    thread_count: 2

connections:
  - source: mixed-directory
    target: v5
    filter:
      regex:
        regex: "^.*-v5\\.xml$"
  - source: mixed-directory
    target: v6
    filter:
      regex:
        regex: "^.*-v6\\.xml$"
  - source: local-red
    target: red
    filter:
      all:

prometheus:
  gateway: 127.0.0.1:9091
  interval: 5000

postgresql:
  url: "postgresql://postgres:password@127.0.0.1:5432/cortex"

http_server:
  address: "0.0.0.0:56008"
  static_content_path: "dispatcher/static-web/dist"
